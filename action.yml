name: 'Hello World'
description: 'Greet someone'
inputs:
  app-id:
    description: 'ID of GitHub app'
    required: true
  private-key:
    description: 'Private key file associated with the GitHub app'
outputs:
  token:
    description: "Token generated from GitHub private-key + app-id"
    value: ${{ steps.generate-token.outputs.token }}
runs:
  using: "composite"
  steps:
    - uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    - name: install-dependencies
      run: |
        echo "install dependencies"
        pip install -r $GITHUB_ACTION_PATH/requirements.txt
      shell: bash

    - name: generate-token
      run: |
        echo "generate token"
        python $GITHUB_ACTION_PATH/generate_token.py ${{ inputs.app-id }} ${{ inputs.private-key }}
      shell: bash
